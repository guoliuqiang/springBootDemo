[
  {
    "processDefinition": {
      "id": 17,
      "code": 7392427118304,
      "name": "STRATEGY-SUMMARY-PROCESS",
      "version": 3,
      "releaseState": "OFFLINE",
      "projectCode": 7359611481056,
      "description": "策略汇总表加工",
      "globalParams": "[{\"prop\":\"date8\",\"value\":\"$[yyyyMMdd-1]\",\"direct\":\"IN\",\"type\":\"VARCHAR\"}]",
      "globalParamList": [
        {
          "prop": "date8",
          "direct": "IN",
          "type": "VARCHAR",
          "value": "$[yyyyMMdd-1]"
        }
      ],
      "globalParamMap": {
        "date8": "$[yyyyMMdd-1]"
      },
      "createTime": "2022-10-31 02:35:37",
      "updateTime": "2022-11-01 04:16:04",
      "flag": "YES",
      "userId": 1,
      "userName": null,
      "projectName": null,
      "locations": "[{\"taskCode\":7392401409632,\"x\":128.8000030517578,\"y\":172.1999969482422},{\"taskCode\":7392406159968,\"x\":399.79998779296875,\"y\":172.1999969482422},{\"taskCode\":7392409495392,\"x\":668.4000244140625,\"y\":173.1999969482422},{\"taskCode\":7392412945504,\"x\":957.5999755859375,\"y\":172.1999969482422},{\"taskCode\":7392417546720,\"x\":1243.5999755859375,\"y\":168.1999969482422},{\"taskCode\":7392422686304,\"x\":1577.199951171875,\"y\":172.1999969482422}]",
      "scheduleReleaseState": null,
      "timeout": 0,
      "tenantId": 2,
      "tenantCode": null,
      "modifyBy": null,
      "warningGroupId": 0,
      "executionType": "PARALLEL"
    },
    "processTaskRelationList": [
      {
        "id": 411,
        "name": "",
        "processDefinitionVersion": 3,
        "projectCode": 7359611481056,
        "processDefinitionCode": 7392427118304,
        "preTaskCode": 0,
        "preTaskVersion": 0,
        "postTaskCode": 7392401409632,
        "postTaskVersion": 2,
        "conditionType": "NONE",
        "conditionParams": {},
        "createTime": "2022-11-01 04:16:04",
        "updateTime": "2022-11-01 04:16:04",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 412,
        "name": "",
        "processDefinitionVersion": 3,
        "projectCode": 7359611481056,
        "processDefinitionCode": 7392427118304,
        "preTaskCode": 7392401409632,
        "preTaskVersion": 2,
        "postTaskCode": 7392406159968,
        "postTaskVersion": 2,
        "conditionType": "NONE",
        "conditionParams": {},
        "createTime": "2022-11-01 04:16:04",
        "updateTime": "2022-11-01 04:16:04",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 413,
        "name": "",
        "processDefinitionVersion": 3,
        "projectCode": 7359611481056,
        "processDefinitionCode": 7392427118304,
        "preTaskCode": 7392406159968,
        "preTaskVersion": 2,
        "postTaskCode": 7392409495392,
        "postTaskVersion": 2,
        "conditionType": "NONE",
        "conditionParams": {},
        "createTime": "2022-11-01 04:16:04",
        "updateTime": "2022-11-01 04:16:04",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 414,
        "name": "",
        "processDefinitionVersion": 3,
        "projectCode": 7359611481056,
        "processDefinitionCode": 7392427118304,
        "preTaskCode": 7392409495392,
        "preTaskVersion": 2,
        "postTaskCode": 7392412945504,
        "postTaskVersion": 2,
        "conditionType": "NONE",
        "conditionParams": {},
        "createTime": "2022-11-01 04:16:04",
        "updateTime": "2022-11-01 04:16:04",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 415,
        "name": "",
        "processDefinitionVersion": 3,
        "projectCode": 7359611481056,
        "processDefinitionCode": 7392427118304,
        "preTaskCode": 7392412945504,
        "preTaskVersion": 2,
        "postTaskCode": 7392417546720,
        "postTaskVersion": 2,
        "conditionType": "NONE",
        "conditionParams": {},
        "createTime": "2022-11-01 04:16:04",
        "updateTime": "2022-11-01 04:16:04",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 416,
        "name": "",
        "processDefinitionVersion": 3,
        "projectCode": 7359611481056,
        "processDefinitionCode": 7392427118304,
        "preTaskCode": 7392417546720,
        "preTaskVersion": 2,
        "postTaskCode": 7392422686304,
        "postTaskVersion": 2,
        "conditionType": "NONE",
        "conditionParams": {},
        "createTime": "2022-11-01 04:16:04",
        "updateTime": "2022-11-01 04:16:04",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      }
    ],
    "taskDefinitionList": [
      {
        "id": 159,
        "code": 7392401409632,
        "name": "前置依赖",
        "version": 2,
        "description": "前置依赖",
        "projectCode": 7359611481056,
        "userId": 1,
        "taskType": "DEPENDENT",
        "taskParams": {
          "localParams": [],
          "resourceList": [],
          "dependence": {
            "relation": "AND",
            "dependTaskList": [
              {
                "relation": "AND",
                "dependItemList": [
                  {
                    "projectCode": 7359611481056,
                    "definitionCode": 7362928866912,
                    "depTaskCode": 7363215637088,
                    "cycle": "day",
                    "dateValue": "today",
                    "state": null
                  }
                ]
              }
            ]
          }
        },
        "taskParamList": [],
        "taskParamMap": null,
        "flag": "YES",
        "taskPriority": "MEDIUM",
        "userName": null,
        "projectName": null,
        "workerGroup": "default",
        "environmentCode": -1,
        "failRetryTimes": 0,
        "failRetryInterval": 1,
        "timeoutFlag": "CLOSE",
        "timeoutNotifyStrategy": "WARN",
        "timeout": 0,
        "delayTime": 0,
        "resourceIds": "",
        "createTime": "2022-10-31 02:35:37",
        "updateTime": "2022-11-01 04:16:04",
        "modifyBy": null,
        "taskGroupId": 0,
        "taskGroupPriority": 0,
        "cpuQuota": -1,
        "memoryMax": -1,
        "taskExecuteType": "BATCH",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 160,
        "code": 7392406159968,
        "name": "策略汇总表加工",
        "version": 2,
        "description": "策略汇总表加工",
        "projectCode": 7359611481056,
        "userId": 1,
        "taskType": "SQL",
        "taskParams": {
          "localParams": [],
          "resourceList": [],
          "type": "HIVE",
          "datasource": 5,
          "sql": "INSERT overwrite table bpd_db_sim.t2_strategy_sum partition(dt = ${date8})\r\nselect\r\n\tstrategy_group_id,\r\n\tsum(exposure_user),\r\n\tsum(hits_customer),\r\n\tsum(customer_num),\r\n\tcoalesce(round(sum(hits_customer)/sum(exposure_user),2)*100,0),\r\n\tcoalesce(round(sum(customer_num)/sum(hits_customer),2)*100,0),\r\n\tcoalesce(round(sum(customer_num)/sum(exposure_user),2)*100,0)\r\nfrom\r\n\tbpd_db_sim.t2_strategy_effect\r\nwhere strategy_group_id <> 0\r\ngroup by\r\n\tstrategy_group_id",
          "sqlType": "1",
          "preStatements": [],
          "postStatements": [],
          "segmentSeparator": "",
          "displayRows": 10,
          "udfs": ""
        },
        "taskParamList": [],
        "taskParamMap": null,
        "flag": "YES",
        "taskPriority": "MEDIUM",
        "userName": null,
        "projectName": null,
        "workerGroup": "default",
        "environmentCode": 7395773982176,
        "failRetryTimes": 0,
        "failRetryInterval": 1,
        "timeoutFlag": "CLOSE",
        "timeoutNotifyStrategy": "WARN",
        "timeout": 0,
        "delayTime": 0,
        "resourceIds": "",
        "createTime": "2022-10-31 02:35:37",
        "updateTime": "2022-11-01 04:16:04",
        "modifyBy": null,
        "taskGroupId": 0,
        "taskGroupPriority": 0,
        "cpuQuota": -1,
        "memoryMax": -1,
        "taskExecuteType": "BATCH",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 158,
        "code": 7392409495392,
        "name": "删除临时表",
        "version": 2,
        "description": "删除临时表",
        "projectCode": 7359611481056,
        "userId": 1,
        "taskType": "SQL",
        "taskParams": {
          "localParams": [],
          "resourceList": [],
          "type": "HIVE",
          "datasource": 5,
          "sql": "drop table bpd_db_sim.t2_strategy_sum_view",
          "sqlType": "1",
          "preStatements": [],
          "postStatements": [],
          "segmentSeparator": "",
          "displayRows": 10
        },
        "taskParamList": [],
        "taskParamMap": null,
        "flag": "YES",
        "taskPriority": "MEDIUM",
        "userName": null,
        "projectName": null,
        "workerGroup": "default",
        "environmentCode": 7395773982176,
        "failRetryTimes": 0,
        "failRetryInterval": 1,
        "timeoutFlag": "CLOSE",
        "timeoutNotifyStrategy": "WARN",
        "timeout": 0,
        "delayTime": 0,
        "resourceIds": "",
        "createTime": "2022-10-31 02:35:37",
        "updateTime": "2022-11-01 04:16:04",
        "modifyBy": null,
        "taskGroupId": 0,
        "taskGroupPriority": 0,
        "cpuQuota": -1,
        "memoryMax": -1,
        "taskExecuteType": "BATCH",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 161,
        "code": 7392409495392,
        "name": "删除临时表",
        "version": 2,
        "description": "删除临时表",
        "projectCode": 7359611481056,
        "userId": 1,
        "taskType": "SQL",
        "taskParams": {
          "localParams": [],
          "resourceList": [],
          "type": "HIVE",
          "datasource": 5,
          "sql": "drop table bpd_db_sim.t2_strategy_sum_view",
          "sqlType": "1",
          "preStatements": [],
          "postStatements": [],
          "segmentSeparator": "",
          "displayRows": 10
        },
        "taskParamList": [],
        "taskParamMap": null,
        "flag": "YES",
        "taskPriority": "MEDIUM",
        "userName": null,
        "projectName": null,
        "workerGroup": "default",
        "environmentCode": 7395773982176,
        "failRetryTimes": 0,
        "failRetryInterval": 1,
        "timeoutFlag": "CLOSE",
        "timeoutNotifyStrategy": "WARN",
        "timeout": 0,
        "delayTime": 0,
        "resourceIds": "",
        "createTime": "2022-10-31 02:35:37",
        "updateTime": "2022-11-01 04:16:04",
        "modifyBy": null,
        "taskGroupId": 0,
        "taskGroupPriority": 0,
        "cpuQuota": -1,
        "memoryMax": -1,
        "taskExecuteType": "BATCH",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 162,
        "code": 7392412945504,
        "name": "创建临时表",
        "version": 2,
        "description": "创建临时表",
        "projectCode": 7359611481056,
        "userId": 1,
        "taskType": "SQL",
        "taskParams": {
          "localParams": [],
          "resourceList": [],
          "type": "HIVE",
          "datasource": 5,
          "sql": "CREATE table bpd_db_sim.t2_strategy_sum_view as\r\nselect\r\n\t*\r\nfrom\r\n\tbpd_db_sim.t2_strategy_sum\r\nwhere\r\n\tdt = ${date8} ",
          "sqlType": "1",
          "preStatements": [],
          "postStatements": [],
          "segmentSeparator": "",
          "displayRows": 10
        },
        "taskParamList": [],
        "taskParamMap": null,
        "flag": "YES",
        "taskPriority": "MEDIUM",
        "userName": null,
        "projectName": null,
        "workerGroup": "default",
        "environmentCode": 7395773982176,
        "failRetryTimes": 0,
        "failRetryInterval": 1,
        "timeoutFlag": "CLOSE",
        "timeoutNotifyStrategy": "WARN",
        "timeout": 0,
        "delayTime": 0,
        "resourceIds": "",
        "createTime": "2022-10-31 02:35:37",
        "updateTime": "2022-11-01 04:16:04",
        "modifyBy": null,
        "taskGroupId": 0,
        "taskGroupPriority": 0,
        "cpuQuota": -1,
        "memoryMax": -1,
        "taskExecuteType": "BATCH",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 163,
        "code": 7392417546720,
        "name": "删除数据",
        "version": 2,
        "description": "删除数据",
        "projectCode": 7359611481056,
        "userId": 1,
        "taskType": "SQL",
        "taskParams": {
          "localParams": [],
          "resourceList": [],
          "type": "MYSQL",
          "datasource": 3,
          "sql": "delete from `csc-strategy-sim`.t2_strategy_sum where 1=1",
          "sqlType": "1",
          "preStatements": [],
          "postStatements": [],
          "segmentSeparator": "",
          "displayRows": 10
        },
        "taskParamList": [],
        "taskParamMap": null,
        "flag": "YES",
        "taskPriority": "MEDIUM",
        "userName": null,
        "projectName": null,
        "workerGroup": "default",
        "environmentCode": 7395773982176,
        "failRetryTimes": 0,
        "failRetryInterval": 1,
        "timeoutFlag": "CLOSE",
        "timeoutNotifyStrategy": "WARN",
        "timeout": 0,
        "delayTime": 0,
        "resourceIds": "",
        "createTime": "2022-10-31 02:35:37",
        "updateTime": "2022-11-01 04:16:04",
        "modifyBy": null,
        "taskGroupId": 0,
        "taskGroupPriority": 0,
        "cpuQuota": -1,
        "memoryMax": -1,
        "taskExecuteType": "BATCH",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      },
      {
        "id": 164,
        "code": 7392422686304,
        "name": "策略汇总表导出",
        "version": 2,
        "description": "策略汇总表导出",
        "projectCode": 7359611481056,
        "userId": 1,
        "taskType": "SHELL",
        "taskParams": {
          "localParams": [],
          "rawScript": "sqoop export \\\r\n--connect jdbc:mysql://192.168.65.104:3306/csc-strategy-sim \\\r\n--username root \\\r\n--password 123456qwerty \\\r\n--table t2_strategy_sum \\\r\n--export-dir /user/hive/warehouse/bpd_db_sim.db/t2_strategy_sum_view \\\r\n--m 1 \\\r\n--input-fields-terminated-by \"\\001\" ;",
          "resourceList": []
        },
        "taskParamList": [],
        "taskParamMap": null,
        "flag": "YES",
        "taskPriority": "MEDIUM",
        "userName": null,
        "projectName": null,
        "workerGroup": "default",
        "environmentCode": -1,
        "failRetryTimes": 0,
        "failRetryInterval": 1,
        "timeoutFlag": "CLOSE",
        "timeoutNotifyStrategy": "WARN",
        "timeout": 0,
        "delayTime": 0,
        "resourceIds": "",
        "createTime": "2022-10-31 02:35:37",
        "updateTime": "2022-11-01 04:16:04",
        "modifyBy": null,
        "taskGroupId": 0,
        "taskGroupPriority": 0,
        "cpuQuota": -1,
        "memoryMax": -1,
        "taskExecuteType": "BATCH",
        "operator": 1,
        "operateTime": "2022-11-01 04:16:04"
      }
    ],
    "schedule": null
  }
]
